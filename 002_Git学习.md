# Git Skills

## 完整的流程

>流程1：
>
>先初始化本地git，再把git提交成远程分支

- 初始化一个`git`，初始完`git`后，如果你是`Windows`用户，你会在目录里看到一个`.git`文件夹，这就说明本地初始化`git`成功了，然后输入

```bash
git init
```

- 给`git`添加文件`README.md`

```bash
git add README.md
```

- 添加完以后，需要进行托付，并写明托付原因：
- 其中`-m`后面的`first commit`就是你要写的托付原因，当然也是支持汉语的。接下来就是，添加远程仓库：(注意后面的链接是你创建`GitHub`项目时，自动生成的)

```bash
git commit -m "first commit"
```

- 添加完远程仓库分支后，接下来就是提交这个分支了：
```bash
git remote add origin https://github.com/YOUR-USERNAME/YOUR-REPOSITORY-NAME.git
git push -u origin master
```

> 流程2：
>
> ​	网页端，直接先把远程库创建好

```bash
git clone https://github.com/nongshuqiner/playgit.git
git add .
git commit -m ' '
git push
```

## 流程中会遇到的问题记录

### `branch`基本操作

- 增 (新建分支)

```bash
# 创建一个分支
git branch testing

# 切换到新分支
git checkout testing

# 上面两步操作合并简写,新建分支,并将本地HEAD切换到新分支上
git checkout -b testing

# 它是下面两条命令的简写：
git branch testing
git checkout testing

# 推送到远端,origin没有什么特殊含义,指定远程仓库,通常默认为origin
git push origin testing

# 如果远端上的分支名字不一样,我们可以进行本地到远端的映射
$ git push origin testing:awesomebranch
```

- 删 (删除分支)

```bash
git branch -d hotfix

# 分支没有合并,但可以使用大写的D强制删除
git branch -D hotfix
```

- 查 (分支状态)

```bash
# 查看电脑B本地仓库的分支
git branch

# 查看本地和远程仓库的所有分支
git branch -a

# 查看远程仓库的分支
git branch -r
```

### 删除远程分支

- 查看远程分支

```bash
git branch -a
```

- 删除远程分支

```bash
git push origin --delete <branchName>

# 推送一个空分支到远程分支，其实就相当于删除远程分支
git push origin :dbg_lichen_star
```

### 退到指定状态，再新建分支

- 需要推送到远程时：

    1. 找到需要分支的节点，然后git checkout `<commit id>`，将HEAD指过去。

    2. 此时`HEAD`为游离状态`（’detached HEAD‘）`。

    3. 创建分支，并切换，`git checkout -b <branch name>`。在分支上修改，操作。

    4. `push`到远程仓库，`git push origin <branch name>`完成

    5. `git push origin dev`，这条命令表示把本地`dev`分支提交到远程仓库，**即创建了远程分支`dev`**

- 本地修改时：

  1. `git checkout -b branch_name pre_commit_id` 就可以在`pre_commit_id`处创建一个名为`branch_name`的新分支，并且HEAD会指导新的分支上

  2. 需要推送到远程时，参考上方的操作

     

## git 放弃修改/增加文件操作

> [git 放弃修改，放弃增加文件操作](https://blog.csdn.net/ustccw/article/details/79068547)

1. 本地**修改了**一些文件 (并没有使用 `git add` 到暂存区)，想放弃修改

   - 单个文件/文件夹：

     ```bash
      git checkout filename
     ```

   - 所有文件/文件夹：

     ```bash
      git checkout .
     ```

2. 本地**新增了**一些文件 (并没有 `git add` 到暂存区)，想放弃修改

   - 单个文件/文件夹：

     ```bash
     rm  -rf filename
     ```

   - 所有文件：

     ```bash
     git clean -xdf
     ```

     > 删除新增的文件，如果文件已经已经 git add 到暂存区，并不会删除！

   - 所有文件和文件夹：
   
     ```bash
     git clean -xdff
     ```
   
     >  [谨慎操作] 本命令删除新增的文件和文件夹，如果文件已经已经 git a dd 到暂存区，并不会删除！



3. 本地**修改/新增了**一些文件，**已经** `git add` 到暂存区，想放弃修改

   - 单个文件/文件夹：

     ```bash
      git reset HEAD filename
     ```
   
   - 所有文件/文件夹：
   
       ```bash
       git reset HEAD .
       ```
   
4. 本地通过 `git add` 和 `git commit` 后，想要撤销此次 commit

   - 撤销 commit, 同时保留该 commit 修改：

     ```bash
     git reset last_commit_id
     ```

     >
     > 这个 commit_id 是你想要回到的那个节点，可以通过 git log 查看，可以只选前 6 位。
     >
     > 撤销之后，你所做的已经 commit 的修改还在工作区！

   - 撤销 `commit`, 同时本地删除该 `commit` 修改：

     ```bash
     git reset --hard last_commit_id
     ```

     > 这个 commit_id 是你想要回到的那个节点，可以通过 git log 查看，可以只选前6位
     >
     > [谨慎操作] 撤销之后，你所做的已经 commit 的修改将会清除，仍在工作区/暂存区的代码也将会清除！

---



## 使用标签 [tag](https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE)

> 达到一个重要的阶段，并希望永远记住那个特别的提交快照，你可以使用 git tag 给它打上标签
>
> 比较有代表性的是人们会使用这个功能来标记发布结点（ `v1.0` 、 `v2.0` 等等）

1. #### 创建标签：Git 支持两种标签：轻量标签（lightweight）与附注标签（annotated）
  
    1. 轻量标签很像一个不会改变的分支——它只是某个特定提交的引用。
    2. 附注标签是存储在 Git 数据库中的一个完整对象， 它们是可以被校验的，其中包含打标签者的名字、电子邮件地址、日期时间， 此外还有一个标签信息，并且可以使用 GNU Privacy Guard （GPG）签名并验证。
    3. 通常会建议创建附注标签，这样你可以拥有以上所有信息。但是如果你只是想用一个临时的标签， 或者因为某些原因不想要保存这些信息，那么也可以用轻量标签。
    
2. 附注标签

    - 在 Git 中创建附注标签十分简单。 最简单的方式是当你在运行 `git tag` 命令时指定 `-a` 选项，

    - `-a` 指定名称；`-m` 选项指定了一条将会存储在标签中的信息

        ```python
        git tag -a v1.4 -m "my version 1.4"
        ```

    - 通过使用 `git show` 命令可以看到标签信息和与之对应的提交信息：

      ```python
      git show v1.4
      ```

    - 也可以按照特定的模式查找标签，如果只对 1.8.5 系列感兴趣，可以运行：

        ```python
        git tag -l "v1.8.5*"
        ```

    

3. 轻量标签
  - 轻量标签本质上是将提交校验和存储到一个文件中——没有保存任何其他信息
  
  - 创建轻量标签，不需要使用 `-a`、`-s` 或 `-m` 选项，只需要提供标签名字：
  
    ```python
    git tag v1.4-lw
    ```
  
4. 后期打标签

  - 你也可以对过去的提交打标签。 假设提交历史是这样的：

    ```python
    commit e2eee6b2e5c5c4e62643e7230a2bc3975c68ac73 (HEAD -> with-all-net, tag: v3)
    Author: hongtao45 <hongtao45@foxmail.com>
    Date:   Mon Apr 25 23:27:28 2022 +0800
    
        修改代码，增了一部分的掉头车辆
    
    commit c5b26a1dda347c592bf4dac9dc27ecee46c39717
    Author: hongtao45 <hongtao45@foxmail.com>
    Date:   Mon Apr 25 23:17:40 2022 +0800
    
        保留了全部的路网，仅修改掉头车道和添加POI文件
    
    commit f3283dcb08a22dfc33de1f84c662e136b49d628c
    Author: hongtao45 <hongtao45@foxmail.com>
    Date:   Sat Apr 23 13:45:17 2022 +0800
    
        整合好，准备打包
    
    commit e50d075d4dfbaa35a10925cb9edc4ca1efbae115
    Author: hongtao45 <hongtao45@foxmail.com>
    Date:   Sat Apr 23 12:41:20 2022 +0800
    
        流量加载的代码，四个方向都调整好了
    
    commit 995701572bc99441f6241a776be64123a9e95e6e
    Author: hongtao45 <hongtao45@foxmail.com>
    Date:   Sat Apr 23 01:03:01 2022 +0800
    
        添加流量的代码，按15min的间隔来添加
    ```

  -  v1 时你忘记给项目打标签，也就是在 “ 整合好，准备打包” 提交。

  - 可以在之后补上标签。 要在那个提交上打标签，你需要在命令的末尾指定提交的校验和（或部分校验和）：

    ```python
    git tag -a v1 -m "发送给师兄的v1" f3283dcb
    ```

5. 远程标签

   默认情况下，`git push` 命令并**不会传送标签到远程仓库服务器上**

   - 在创建完标签后你必须显式地推送标签到共享服务器上

   ```python
   git push origin v1
   ```
   
   这个过程就像共享远程分支一样——你可以运行 `git push origin <tagname>`

   

   - 如果想要一次性推送很多标签，也可以使用带有 `--tags` 选项的 `git push` 命令。

   ```python
   git push origin --tags
   git push --tags
   ```
   
   这将会把所有不在远程仓库服务器上的标签全部传送到那里
   
6. 常用的标签操作

   - 显示本地或远程tag

     ```python 
     # 本地
     git tag -l  
     
     # 远程
     git ls-remote --tags
     ```

   - 删除本地tag或远程tag

     ```python
     # 本地
     git tag -d local_tag
     
     # 远程
     git push origin --delete tag v0.1
     git push origin :refs/tags/v0.1 # 推送的远程的tag，是放在refs/tags/下的
     ```
   
   - 显示信息或切换

     ```python
     git show v1
     git checkout tag_name
     ```
   
     

# Git Bash常用基本指令

- [常用的基本指令](https://www.jianshu.com/p/2ccdfd59e215)

```bash
pwd #查看当前目录（pwd）
cd  #切换目录（cd 想要切换到的目录名称
ls  #查看当前目录下的内容（ls     ls -al          ls -l）

mkdir #创建目录（mkdir 目录名称）
touch #创建文件（touch 文件名称.html/txt（注意：文件需要带后缀名））

clear #清空（clear）

cat：查看文件全部内容（cat index.html）

rm #删除文件（rm index.html）
rm -rf #把选择的文件夹下所有的文件删除（rm -rf 文件夹名称）
mv # 移动文件或重命名（mv 想要移动的文件 想要移动到的路径）
 （mv 想要重命名的文件 想要重命名的文件的名称）

cp #复制文件（cp 想要复制的文件 想要复制到的路径）

wc #字数信息统计（wc 文件名称）
wc -l #报告行数（wc -l 文件名称）
wc -c #报告字节数（wc -c 文件名称）
wc -m # 报告字符数（wc -m 文件名称）
wc -w #报告单词数（wc -w 文件名称）
```



- 获取帮助信息

```bash
# 指令 --help
ls --help
```

